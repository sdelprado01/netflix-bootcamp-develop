CREATE TABLE IF NOT EXISTS CATEGORIES
(
  ID BIGINT(20)  NOT NULL AUTO_INCREMENT,
  NAME        VARCHAR(60) NOT NULL,
  PRIMARY KEY (ID),
  UNIQUE INDEX `unique` (`NAME` ASC)
);

CREATE TABLE IF NOT EXISTS TV_SHOWS
(
  ID BIGINT(20) NOT NULL AUTO_INCREMENT,
  NAME VARCHAR(256) NOT NULL,
  SHORT_DESC VARCHAR(256) NULL DEFAULT NULL,
  LONG_DESC VARCHAR(2048) NULL DEFAULT NULL,
  YEAR YEAR(4) NOT NULL,
  RECOMMENDED_AGE TINYINT NOT NULL,
  CATEGORY_ID BIGINT(20) NOT NULL,
  ADVERTISING VARCHAR(256) NULL DEFAULT NULL,
  PRIMARY KEY (ID),
  CONSTRAINT FK_TV_SHOWS_CATEGORY_ID
    FOREIGN KEY (CATEGORY_ID) REFERENCES CATEGORIES (ID)
);

CREATE TABLE IF NOT EXISTS SEASONS
(
  ID BIGINT(20) NOT NULL AUTO_INCREMENT,
  NUMBER TINYINT NOT NULL,
  NAME VARCHAR(256) NOT NULL,
  TV_SHOW_ID BIGINT(20) NOT NULL,
  PRIMARY KEY (ID),
  CONSTRAINT FK_SEASONS_TV_SHOW_ID
    FOREIGN KEY (TV_SHOW_ID) REFERENCES TV_SHOWS (ID)
);

CREATE TABLE IF NOT EXISTS CHAPTERS
(
  ID BIGINT(20) NOT NULL AUTO_INCREMENT,
  NUMBER TINYINT NOT NULL,
  NAME VARCHAR(256) NOT NULL,
  DURATION TINYINT NOT NULL,
  SEASON_ID  BIGINT(20)   NOT NULL,
  PRIMARY KEY (ID),
  CONSTRAINT FK_CHAPTERS_SEASON_ID
    FOREIGN KEY (SEASON_ID) REFERENCES SEASONS (ID)
);

INSERT INTO CATEGORIES(ID, NAME) VALUES
   (1, 'TERROR'),
   (2, 'COMEDIA'),
   (3, 'ACCIÓN');

INSERT INTO TV_SHOWS(ID, NAME, SHORT_DESC, LONG_DESC, YEAR, RECOMMENDED_AGE, CATEGORY_ID) VALUES
   (1, 'Juego de tronos', 'Descripción corta', 'Descripción larga', '2012', 16, 3),
   (2, 'American horror Story', NULL, NULL, '2010', 16, 1),
   (3, 'Big Bang', NULL, NULL, '2008', 7, 2);

INSERT INTO SEASONS(ID, NUMBER, NAME, TV_SHOW_ID) VALUES
   (1, 1, 'One', 1),
   (2, 2, 'Two', 1),
   (3, 1, 'One', 2),
   (4, 2, 'Two', 2),
   (5, 3, 'Three', 2),
   (6, 1, 'One', 3);

INSERT INTO CHAPTERS(ID, NUMBER, NAME, DURATION, SEASON_ID) VALUES
   (1, 1, "Chapter 1", 43, 1),
   (2, 2, "Chapter 2", 45, 1),
   (3, 3, "Chapter 3", 44, 1),
   (4, 1, "Chapter 0", 50, 2);

CREATE TABLE IF NOT EXISTS CATEGORIES_TV_SHOWS
    (
    CATEGORY_ID BIGINT(20)  NOT NULL,
    TV_SHOW_ID BIGINT(20)  NOT NULL,
    PRIMARY KEY (CATEGORY_ID, TV_SHOW_ID),
    CONSTRAINT CATEGORIES_TV_SHOWS_IBFK_1
    FOREIGN KEY (CATEGORY_ID) REFERENCES CATEGORIES (ID),
    CONSTRAINT CATEGORIES_TV_SHOWS_IBFK_2
    FOREIGN KEY (TV_SHOW_ID) REFERENCES TV_SHOWS (ID)
    );

    ALTER TABLE TV_SHOWS DROP FOREIGN KEY FK_TV_SHOWS_CATEGORY_ID;
    ALTER TABLE TV_SHOWS DROP COLUMN CATEGORY_ID;

    INSERT INTO CATEGORIES_TV_SHOWS VALUES
   (1, 3),
   (2, 1),
   (3, 2);

   CREATE TABLE IF NOT EXISTS ACTORS
(
  ID             BIGINT(20)    NOT NULL AUTO_INCREMENT,
  NAME         VARCHAR(256)  NOT NULL,
  BIRTH_YEAR         YEAR(4)      NOT NULL,
  PRIMARY KEY (ID)
);

INSERT INTO ACTORS VALUES
    (1, 'Sergio', 2001),
    (2, 'Jose', 1998),
    (3, 'Ana', 1989),
    (4, 'Rosa', 2005),
    (5, 'Miguel', 1972);

    CREATE TABLE IF NOT EXISTS CHAPTERS_ACTORS(
  CHAPTER_ID  BIGINT(20)    NOT NULL,
  ACTOR_ID  BIGINT(20)    NOT NULL,
  PRIMARY KEY (CHAPTER_ID, ACTOR_ID),
  CONSTRAINT CHAPTERS_ACTORS_IBFK_1
  FOREIGN KEY (CHAPTER_ID) REFERENCES CHAPTERS (ID),
  CONSTRAINT CHAPTERS_ACTORS_IBFK_2
  FOREIGN KEY (ACTOR_ID) REFERENCES ACTORS (ID)
);

CREATE TABLE  IF NOT EXISTS AWARDS
(
	ID		BIGINT(20) NOT NULL AUTO_INCREMENT,
    NAME		VARCHAR(256) NOT NULL,
    PRIMARY KEY (ID)
);

CREATE TABLE IF NOT EXISTS TV_SHOWS_AWARDS
(
	AWARD_ID		BIGINT(20) NOT NULL,
    TV_SHOW_ID	BIGINT(20) NOT NULL,
    PRIMARY KEY(AWARD_ID,TV_SHOW_ID),
    CONSTRAINT FK_TV_SHOWS_AWARDS_AWARD_ID
		FOREIGN KEY (AWARD_ID) REFERENCES AWARDS (ID),
	CONSTRAINT FK_TV_SHOWS_AWARDS_TV_SHOW_ID
		FOREIGN KEY (TV_SHOW_ID) REFERENCES TV_SHOWS (ID)
);

    INSERT INTO AWARDS(ID, NAME) VALUES
    (1,'Mejor película'),
    (2,'Mejor actriz principal'),
    (3,'Mejor serie de comedia'),
    (4,'Mejor serie de terror'),
    (5,'Mejor serie de acción'),
    (6,'Mejor actriz de reparto');

    INSERT INTO TV_SHOWS_AWARDS(AWARD_ID, TV_SHOW_ID) VALUES
    (2,1),
    (5,1),
    (4,2),
    (3,3),
    (6,3),
    (2,3);
